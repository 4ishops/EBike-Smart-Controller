EESchema Schematic File Version 2  date Dom 21 Out 2012 11:42:29 WEST
LIBS:Allegro_ACS754_ACS755_ACS756_HallCurrentSensor_RevA
LIBS:ac-dc
LIBS:conn
LIBS:contrib
LIBS:dc-dc
LIBS:device
LIBS:elec-unifil
LIBS:gennum
LIBS:hc11
LIBS:intel
LIBS:interface
LIBS:linear
LIBS:memory
LIBS:microcontrollers
LIBS:nxp_armmcu
LIBS:power
LIBS:powerint
LIBS:pspice
LIBS:regul
LIBS:sensors
LIBS:special
LIBS:transistors
LIBS:ttl_ieee
LIBS:opendous
LIBS:R2C2_bluetooth
LIBS:EBike_Smart_Controller-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 1
Title "EBike Smart Controller"
Date "21 oct 2012"
Rev "V0.1"
Comp "Author: Jorge Pinto aka Casainho (casainho@gmail.com)"
Comment1 "License: GPL V3"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	8050 3050 5400 3050
Wire Wire Line
	8050 3250 5400 3250
Wire Wire Line
	7200 1700 7200 1750
Wire Wire Line
	7200 1750 5350 1750
Wire Wire Line
	3950 3500 2150 3500
Wire Wire Line
	4300 4150 5600 4150
Wire Wire Line
	3750 4250 5600 4250
Wire Wire Line
	3750 4450 5600 4450
Wire Wire Line
	6600 5950 6600 6050
Wire Wire Line
	6400 5050 6600 5050
Wire Wire Line
	7550 1200 8900 1200
Wire Wire Line
	8700 2100 8700 2200
Wire Wire Line
	8900 2300 8700 2300
Connection ~ 5950 3150
Wire Wire Line
	5950 2950 5950 3150
Wire Wire Line
	6200 2650 6200 2750
Wire Wire Line
	5950 2650 5950 2750
Wire Wire Line
	5700 2650 5700 2750
Wire Wire Line
	5400 2950 5500 2950
Wire Wire Line
	5500 2950 5500 2900
Wire Wire Line
	5400 3350 5500 3350
Connection ~ 5600 1750
Wire Wire Line
	5600 1800 5600 1750
Wire Wire Line
	5350 1500 5350 1300
Wire Wire Line
	1950 4850 1950 4750
Connection ~ 2350 3500
Wire Wire Line
	2350 3550 2350 3500
Connection ~ 2150 3500
Wire Wire Line
	2150 3550 2150 3450
Wire Wire Line
	1900 3050 1900 3100
Wire Wire Line
	1950 3850 1950 3300
Wire Wire Line
	1950 3300 1800 3300
Wire Wire Line
	1800 3200 2150 3200
Wire Wire Line
	2150 3200 2150 3250
Wire Wire Line
	2150 3750 2150 3850
Wire Wire Line
	2500 1950 2500 2050
Wire Wire Line
	2500 1450 2500 1400
Wire Wire Line
	2500 1400 1850 1400
Connection ~ 2000 1600
Wire Wire Line
	1850 1600 2000 1600
Wire Wire Line
	1600 1100 1600 950 
Wire Wire Line
	1600 1900 1600 2050
Wire Wire Line
	1850 1500 2200 1500
Wire Wire Line
	2200 1500 2200 2050
Wire Wire Line
	1600 950  2150 950 
Wire Wire Line
	2000 1250 2000 1650
Wire Wire Line
	2000 2050 2000 1850
Wire Wire Line
	2500 1750 2500 1650
Connection ~ 2500 1700
Wire Wire Line
	1900 3100 1800 3100
Wire Wire Line
	2350 3850 2350 3750
Wire Wire Line
	1950 5150 1950 5050
Connection ~ 1950 4800
Wire Wire Line
	1950 4450 1950 4550
Wire Wire Line
	1800 5000 1850 5000
Wire Wire Line
	1850 5000 1850 5100
Wire Wire Line
	1850 5100 1950 5100
Connection ~ 1950 5100
Connection ~ 5350 1750
Wire Wire Line
	5350 1700 5350 1800
Wire Wire Line
	5350 2000 5350 2100
Wire Wire Line
	5600 2100 5600 2000
Wire Wire Line
	5500 3350 5500 3500
Wire Wire Line
	5700 2950 5700 3050
Connection ~ 5700 3050
Wire Wire Line
	6200 2950 6200 3250
Connection ~ 6200 3250
Wire Wire Line
	8700 2300 8700 2450
Wire Wire Line
	8700 2200 8900 2200
Wire Wire Line
	7550 1100 8900 1100
Wire Wire Line
	6600 5050 6600 5200
Wire Wire Line
	6600 6050 6400 6050
Wire Wire Line
	3950 5450 5600 5450
Wire Wire Line
	6400 5450 8050 5450
Wire Wire Line
	6400 4650 8050 4650
Wire Wire Line
	6400 5350 8050 5350
Wire Wire Line
	3750 4350 5600 4350
Wire Wire Line
	8000 4150 6400 4150
Wire Wire Line
	3550 4800 1800 4800
Wire Wire Line
	4150 1700 2500 1700
Wire Wire Line
	5350 1300 6650 1300
Wire Wire Line
	8050 3150 5400 3150
NoConn ~ 6400 4250
NoConn ~ 6400 4350
NoConn ~ 6400 4450
NoConn ~ 6400 4550
NoConn ~ 6400 4750
NoConn ~ 6400 4850
NoConn ~ 6400 4950
NoConn ~ 6400 5150
NoConn ~ 6400 5250
NoConn ~ 6400 5550
NoConn ~ 6400 5650
NoConn ~ 6400 5750
NoConn ~ 6400 5850
NoConn ~ 6400 5950
NoConn ~ 5600 6050
NoConn ~ 5600 5950
NoConn ~ 5600 5850
NoConn ~ 5600 5750
NoConn ~ 5600 5650
NoConn ~ 5600 5550
NoConn ~ 5600 5350
NoConn ~ 5600 5250
NoConn ~ 5600 5150
NoConn ~ 5600 5050
NoConn ~ 5600 4950
NoConn ~ 5600 4850
NoConn ~ 5600 4750
NoConn ~ 5600 4650
NoConn ~ 5600 4550
Text Label 6850 4150 0    60   ~ 0
UART RX (LPC2103 P0.1)
Text Label 4300 4150 0    60   ~ 0
UART TX (LPC2103 P0.0)
Text Notes 6300 2850 0    60   ~ 0
ERROR: needs conversion from 5V to 3.3V!!
Text Label 3750 4250 0    60   ~ 0
Hall sensor phase_a (LPC2103 P0.2)
Text Label 3750 4350 0    60   ~ 0
Hall sensor phase_b (LPC2103 P0.4)
Text Label 3750 4450 0    60   ~ 0
Hall sensor phase_c (LPC2103 P0.6)
Text Label 6550 5350 0    60   ~ 0
Voltage_signal (LPC2103 P0.22)
Text Label 6650 4650 0    60   ~ 0
Brake_signal (LPC2103 P0.11)
Text Label 6550 5450 0    60   ~ 0
Throttle_signal (LPC2103 P0.24)
Text Label 3950 5450 0    60   ~ 0
Current_signal (LPC2103 P0.23)
$Comp
L +3.3V #PWR20
U 1 1 5083CE03
P 6600 5950
F 0 "#PWR20" H 6600 5910 30  0001 C CNN
F 1 "+3.3V" H 6600 6060 30  0000 C CNN
	1    6600 5950
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR19
U 1 1 5083CDAD
P 6600 5200
F 0 "#PWR19" H 6600 5200 30  0001 C CNN
F 1 "GND" H 6600 5130 30  0001 C CNN
	1    6600 5200
	1    0    0    -1  
$EndComp
$Comp
L CONN_20X2 P3
U 1 1 5083CBC8
P 6000 5100
F 0 "P3" H 6000 6150 60  0000 C CNN
F 1 "Zero LPC2103 board" V 6000 5100 50  0000 C CNN
	1    6000 5100
	1    0    0    -1  
$EndComp
Text Label 7550 1200 0    60   ~ 0
UART TX (LPC2103 P0.0)
Text Label 7550 1100 0    60   ~ 0
UART RX (LPC2103 P0.1)
$Comp
L +3.3V #PWR21
U 1 1 5083C9AC
P 8700 2100
F 0 "#PWR21" H 8700 2060 30  0001 C CNN
F 1 "+3.3V" H 8700 2210 30  0000 C CNN
	1    8700 2100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR22
U 1 1 5083C9A1
P 8700 2450
F 0 "#PWR22" H 8700 2450 30  0001 C CNN
F 1 "GND" H 8700 2380 30  0001 C CNN
	1    8700 2450
	1    0    0    -1  
$EndComp
NoConn ~ 10100 2400
NoConn ~ 8900 1300
NoConn ~ 8900 1400
NoConn ~ 8900 1500
NoConn ~ 8900 1600
NoConn ~ 8900 1700
NoConn ~ 8900 1800
NoConn ~ 8900 1900
NoConn ~ 8900 2000
NoConn ~ 8900 2100
NoConn ~ 8900 2400
NoConn ~ 8900 2500
NoConn ~ 8900 2600
NoConn ~ 8900 2700
NoConn ~ 10100 2700
NoConn ~ 10100 2600
NoConn ~ 10100 2500
NoConn ~ 10100 2300
NoConn ~ 10100 2200
NoConn ~ 10100 2100
NoConn ~ 10100 2000
NoConn ~ 10100 1900
NoConn ~ 10100 1800
NoConn ~ 10100 1700
NoConn ~ 10100 1600
NoConn ~ 10100 1500
NoConn ~ 10100 1400
NoConn ~ 10100 1300
NoConn ~ 10100 1200
NoConn ~ 10100 1100
$Comp
L BLUETOOTH_MODULE P4
U 1 1 5083C8F8
P 9500 1900
F 0 "P4" H 9500 2800 70  0000 C CNN
F 1 "BLUETOOTH_MODULE" V 9500 1900 70  0000 C CNN
	1    9500 1900
	1    0    0    -1  
$EndComp
Text Label 6350 3250 0    60   ~ 0
Hall sensor phase_a (LPC2103 P0.2)
Text Label 6350 3150 0    60   ~ 0
Hall sensor phase_b (LPC2103 P0.4)
Text Label 6350 3050 0    60   ~ 0
Hall sensor phase_c (LPC2103 P0.6)
$Comp
L R_MINI R10
U 1 1 5083266E
P 6200 2850
F 0 "R10" H 6200 2800 25  0000 C CNN
F 1 "10K" H 6200 2900 25  0000 C CNN
	1    6200 2850
	0    -1   -1   0   
$EndComp
$Comp
L +3.3V #PWR18
U 1 1 5083266D
P 6200 2650
F 0 "#PWR18" H 6200 2610 30  0001 C CNN
F 1 "+3.3V" H 6200 2760 30  0000 C CNN
	1    6200 2650
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR17
U 1 1 50832668
P 5950 2650
F 0 "#PWR17" H 5950 2610 30  0001 C CNN
F 1 "+3.3V" H 5950 2760 30  0000 C CNN
	1    5950 2650
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R9
U 1 1 50832667
P 5950 2850
F 0 "R9" H 5950 2800 25  0000 C CNN
F 1 "10K" H 5950 2900 25  0000 C CNN
	1    5950 2850
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R8
U 1 1 50832663
P 5700 2850
F 0 "R8" H 5700 2800 25  0000 C CNN
F 1 "10K" H 5700 2900 25  0000 C CNN
	1    5700 2850
	0    -1   -1   0   
$EndComp
$Comp
L +3.3V #PWR16
U 1 1 50832662
P 5700 2650
F 0 "#PWR16" H 5700 2610 30  0001 C CNN
F 1 "+3.3V" H 5700 2760 30  0000 C CNN
	1    5700 2650
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR13
U 1 1 50832572
P 5500 2900
F 0 "#PWR13" H 5500 2990 20  0001 C CNN
F 1 "+5V" H 5500 2990 30  0000 C CNN
	1    5500 2900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR14
U 1 1 50832562
P 5500 3500
F 0 "#PWR14" H 5500 3500 30  0001 C CNN
F 1 "GND" H 5500 3430 30  0001 C CNN
	1    5500 3500
	1    0    0    -1  
$EndComp
$Comp
L CONN_5 P2
U 1 1 50832540
P 5000 3150
F 0 "P2" V 4950 3150 50  0000 C CNN
F 1 "Hall sensors" V 5050 3150 50  0000 C CNN
	1    5000 3150
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR15
U 1 1 508324F5
P 5600 2100
F 0 "#PWR15" H 5600 2100 30  0001 C CNN
F 1 "GND" H 5600 2030 30  0001 C CNN
	1    5600 2100
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C4
U 1 1 508324F4
P 5600 1900
F 0 "C4" V 5550 1940 30  0000 C CNN
F 1 "10nF" H 5650 1970 25  0000 C CNN
	1    5600 1900
	0    -1   -1   0   
$EndComp
Text Label 5550 1300 0    60   ~ 0
24V battery (up to 33V)
$Comp
L R_MINI R6
U 1 1 5083228E
P 5350 1600
F 0 "R6" H 5350 1550 25  0000 C CNN
F 1 "100K" H 5350 1650 25  0000 C CNN
	1    5350 1600
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R7
U 1 1 5083228D
P 5350 1900
F 0 "R7" H 5400 1850 25  0000 C CNN
F 1 "10K" H 5350 1950 25  0000 C CNN
	1    5350 1900
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR12
U 1 1 5083228C
P 5350 2100
F 0 "#PWR12" H 5350 2100 30  0001 C CNN
F 1 "GND" H 5350 2030 30  0001 C CNN
	1    5350 2100
	1    0    0    -1  
$EndComp
Text Label 5750 1750 0    60   ~ 0
Voltage_signal (LPC2103 P0.22)
$Comp
L +3.3V #PWR4
U 1 1 5083200B
P 1950 4450
F 0 "#PWR4" H 1950 4410 30  0001 C CNN
F 1 "+3.3V" H 1950 4560 30  0000 C CNN
	1    1950 4450
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P1
U 1 1 50831FC0
P 1450 4900
F 0 "P1" V 1400 4900 40  0000 C CNN
F 1 "Brake" V 1500 4900 40  0000 C CNN
	1    1450 4900
	-1   0    0    1   
$EndComp
Text Label 2150 4800 0    60   ~ 0
Brake_signal (LPC2103 P0.11)
$Comp
L R_MINI R1
U 1 1 50831F42
P 1950 4650
F 0 "R1" H 1950 4600 25  0000 C CNN
F 1 "10K" H 1950 4700 25  0000 C CNN
	1    1950 4650
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR5
U 1 1 50831F3E
P 1950 5150
F 0 "#PWR5" H 1950 5150 30  0001 C CNN
F 1 "GND" H 1950 5080 30  0001 C CNN
	1    1950 5150
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C1
U 1 1 50831F3D
P 1950 4950
F 0 "C1" V 1900 4990 30  0000 C CNN
F 1 "10nF" H 2000 5020 25  0000 C CNN
	1    1950 4950
	0    -1   -1   0   
$EndComp
Text Notes 1250 2200 0    60   ~ 0
Battery GND
$Comp
L C_MINI C3
U 1 1 50831E6F
P 2350 3650
F 0 "C3" V 2300 3690 30  0000 C CNN
F 1 "10nF" H 2400 3720 25  0000 C CNN
	1    2350 3650
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR10
U 1 1 50831E6E
P 2350 3850
F 0 "#PWR10" H 2350 3850 30  0001 C CNN
F 1 "GND" H 2350 3780 30  0001 C CNN
	1    2350 3850
	1    0    0    -1  
$EndComp
$Comp
L CONN_3 K1
U 1 1 50831D6C
P 1450 3200
F 0 "K1" V 1400 3200 50  0000 C CNN
F 1 "Throttle" V 1500 3200 40  0000 C CNN
	1    1450 3200
	-1   0    0    1   
$EndComp
$Comp
L +5V #PWR2
U 1 1 50831D0B
P 1900 3050
F 0 "#PWR2" H 1900 3140 20  0001 C CNN
F 1 "+5V" H 1900 3140 30  0000 C CNN
	1    1900 3050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR3
U 1 1 50831D09
P 1950 3850
F 0 "#PWR3" H 1950 3850 30  0001 C CNN
F 1 "GND" H 1950 3780 30  0001 C CNN
	1    1950 3850
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R2
U 1 1 50831D06
P 2150 3350
F 0 "R2" H 2150 3300 25  0000 C CNN
F 1 "3K6" H 2150 3400 25  0000 C CNN
	1    2150 3350
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R3
U 1 1 50831D05
P 2150 3650
F 0 "R3" H 2200 3600 25  0000 C CNN
F 1 "6K8" H 2150 3700 25  0000 C CNN
	1    2150 3650
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR8
U 1 1 50831D04
P 2150 3850
F 0 "#PWR8" H 2150 3850 30  0001 C CNN
F 1 "GND" H 2150 3780 30  0001 C CNN
	1    2150 3850
	1    0    0    -1  
$EndComp
Text Label 2450 3500 0    60   ~ 0
Throttle_signal (LPC2103 P0.24)
Text Label 2650 1700 0    60   ~ 0
Current_signal (LPC2103 P0.23)
$Comp
L GND #PWR11
U 1 1 50831B19
P 2500 2050
F 0 "#PWR11" H 2500 2050 30  0001 C CNN
F 1 "GND" H 2500 1980 30  0001 C CNN
	1    2500 2050
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R5
U 1 1 50831B08
P 2500 1850
F 0 "R5" H 2550 1800 25  0000 C CNN
F 1 "6K8" H 2500 1900 25  0000 C CNN
	1    2500 1850
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R4
U 1 1 50831AF9
P 2500 1550
F 0 "R4" H 2500 1500 25  0000 C CNN
F 1 "3K6" H 2500 1600 25  0000 C CNN
	1    2500 1550
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR7
U 1 1 50831623
P 2000 2050
F 0 "#PWR7" H 2000 2050 30  0001 C CNN
F 1 "GND" H 2000 1980 30  0001 C CNN
	1    2000 2050
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C2
U 1 1 50831587
P 2000 1750
F 0 "C2" V 1950 1790 30  0000 C CNN
F 1 "100nF" V 2050 1820 25  0000 C CNN
	1    2000 1750
	0    -1   -1   0   
$EndComp
Text Label 1650 950  0    60   ~ 0
Motor GND
$Comp
L GND #PWR9
U 1 1 50831321
P 2200 2050
F 0 "#PWR9" H 2200 2050 30  0001 C CNN
F 1 "GND" H 2200 1980 30  0001 C CNN
	1    2200 2050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR1
U 1 1 50831300
P 1600 2050
F 0 "#PWR1" H 1600 2050 30  0001 C CNN
F 1 "GND" H 1600 1980 30  0001 C CNN
	1    1600 2050
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR6
U 1 1 508312E5
P 2000 1250
F 0 "#PWR6" H 2000 1340 20  0001 C CNN
F 1 "+5V" H 2000 1340 30  0000 C CNN
	1    2000 1250
	1    0    0    -1  
$EndComp
$Comp
L ACS754_ACS755_ACS756_HALLCURRENTSENSOR IC1
U 1 1 50830D7C
P 1650 1500
F 0 "IC1" H 1650 1700 60  0000 C CNN
F 1 "ACS756SCA-100B" H 1700 1850 60  0000 C CNN
	1    1650 1500
	0    -1   -1   0   
$EndComp
$EndSCHEMATC
