EESchema Schematic File Version 2  date Qui 07 Fev 2013 23:33:23 WET
LIBS:Allegro_ACS754_ACS755_ACS756_HallCurrentSensor_RevA
LIBS:ac-dc
LIBS:conn
LIBS:contrib
LIBS:dc-dc
LIBS:device
LIBS:elec-unifil
LIBS:gennum
LIBS:hc11
LIBS:intel
LIBS:interface
LIBS:linear
LIBS:memory
LIBS:microcontrollers
LIBS:nxp_armmcu
LIBS:power
LIBS:powerint
LIBS:pspice
LIBS:regul
LIBS:sensors
LIBS:special
LIBS:transistors
LIBS:ttl_ieee
LIBS:opendous
LIBS:R2C2_bluetooth
LIBS:max5035
LIBS:ir2181
LIBS:lm50
LIBS:PSMN6R5
LIBS:EBike_Smart_Controller-cache
EELAYER 27 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 1
Title "EBike Smart Controller -- prototype V3"
Date "7 feb 2013"
Rev ""
Comp "Author: Jorge Pinto aka Casainho (casainho@gmail.com)"
Comment1 "License: GPL V3"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L C_MINI C4
U 1 1 50F16FD1
P 2750 1550
F 0 "C4" V 2650 1450 30  0000 C CNN
F 1 "10uF" H 2800 1450 25  0000 C CNN
	1    2750 1550
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C25
U 1 1 50F16FD0
P 2950 1550
F 0 "C25" V 2850 1450 30  0000 C CNN
F 1 "10uF" H 3000 1450 25  0000 C CNN
	1    2950 1550
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C27
U 1 1 50F16FC7
P 3350 1550
F 0 "C27" V 3250 1450 30  0000 C CNN
F 1 "10uF" H 3400 1450 25  0000 C CNN
	1    3350 1550
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C26
U 1 1 50F16FA7
P 3150 1550
F 0 "C26" V 3050 1450 30  0000 C CNN
F 1 "10uF" H 3200 1450 25  0000 C CNN
	1    3150 1550
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR28
U 1 1 50DAEFB1
P 6100 6450
F 0 "#PWR28" H 6100 6450 30  0001 C CNN
F 1 "GND" H 6100 6380 30  0001 C CNN
	1    6100 6450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR23
U 1 1 50DAEFB0
P 5700 6450
F 0 "#PWR23" H 5700 6450 30  0001 C CNN
F 1 "GND" H 5700 6380 30  0001 C CNN
	1    5700 6450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR24
U 1 1 50DAEFA6
P 5700 8250
F 0 "#PWR24" H 5700 8250 30  0001 C CNN
F 1 "GND" H 5700 8180 30  0001 C CNN
	1    5700 8250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR29
U 1 1 50DAEFA5
P 6100 8250
F 0 "#PWR29" H 6100 8250 30  0001 C CNN
F 1 "GND" H 6100 8180 30  0001 C CNN
	1    6100 8250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR27
U 1 1 50DAEF88
P 6100 4650
F 0 "#PWR27" H 6100 4650 30  0001 C CNN
F 1 "GND" H 6100 4580 30  0001 C CNN
	1    6100 4650
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR22
U 1 1 50DAEF7C
P 5700 4650
F 0 "#PWR22" H 5700 4650 30  0001 C CNN
F 1 "GND" H 5700 4580 30  0001 C CNN
	1    5700 4650
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q5
U 1 1 50DADD3F
P 6000 7100
F 0 "Q5" H 6000 7290 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 6920 30  0000 R CNN
	1    6000 7100
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q4
U 1 1 50DADD38
P 6000 6000
F 0 "Q4" H 6000 6190 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 5820 30  0000 R CNN
	1    6000 6000
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q3
U 1 1 50DADD35
P 6000 5300
F 0 "Q3" H 6000 5490 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 5120 30  0000 R CNN
	1    6000 5300
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q2
U 1 1 50DADD2B
P 6000 4200
F 0 "Q2" H 6000 4390 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 4020 30  0000 R CNN
	1    6000 4200
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q1
U 1 1 50DADD28
P 6000 3500
F 0 "Q1" H 6000 3690 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 3320 30  0000 R CNN
	1    6000 3500
	1    0    0    -1  
$EndComp
$Comp
L PSMN6R5-80PS Q6
U 1 1 50DADD09
P 6000 7800
F 0 "Q6" H 6000 7990 30  0000 R CNN
F 1 "PSMN6R5-80PS" H 6550 7620 30  0000 R CNN
	1    6000 7800
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR33
U 1 1 50DAD98F
P 7100 2150
F 0 "#PWR33" H 7100 2150 30  0001 C CNN
F 1 "GND" H 7100 2080 30  0001 C CNN
	1    7100 2150
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C18
U 1 1 50DAD969
P 7100 1800
F 0 "C18" V 7000 1700 30  0000 C CNN
F 1 "100nF" H 7150 1700 25  0000 C CNN
	1    7100 1800
	0    -1   -1   0   
$EndComp
Text Notes 7850 5000 0    60   ~ 0
This is the circuit GND.
$Comp
L GND #PWR37
U 1 1 50DAD8F3
P 8350 5200
F 0 "#PWR37" H 8350 5200 30  0001 C CNN
F 1 "GND" H 8350 5130 30  0001 C CNN
	1    8350 5200
	1    0    0    -1  
$EndComp
Text Label 8250 6500 0    60   ~ 0
Battery GND
Text Label 1800 1850 0    60   ~ 0
Battery GND
Text Label 9250 5900 0    60   ~ 0
Current_signal (STM32F100 PA2)
Text Label 7650 9250 2    60   ~ 0
Mosfets_temperature_signal (STM32F100 PA3)
$Comp
L LM50 U5
U 1 1 50CB687E
P 4400 9100
F 0 "U5" H 4500 9000 60  0000 C CNN
F 1 "LM50" H 4400 9400 60  0000 C CNN
	1    4400 9100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR20
U 1 1 50CB698D
P 5300 9600
F 0 "#PWR20" H 5300 9600 30  0001 C CNN
F 1 "GND" H 5300 9530 30  0001 C CNN
	1    5300 9600
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R14
U 1 1 50CB698C
P 5300 9400
F 0 "R14" H 5350 9350 25  0000 C CNN
F 1 "6K8 1%" H 5300 9450 25  0000 C CNN
	1    5300 9400
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R13
U 1 1 50CB698B
P 5300 9100
F 0 "R13" H 5300 9050 25  0000 C CNN
F 1 "3K6 1%" H 5300 9150 25  0000 C CNN
	1    5300 9100
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR21
U 1 1 50CB698A
P 5500 9600
F 0 "#PWR21" H 5500 9600 30  0001 C CNN
F 1 "GND" H 5500 9530 30  0001 C CNN
	1    5500 9600
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C16
U 1 1 50CB6989
P 5500 9400
F 0 "C16" V 5450 9440 30  0000 C CNN
F 1 "10nF" H 5550 9470 25  0000 C CNN
	1    5500 9400
	0    -1   -1   0   
$EndComp
$Comp
L +5V #PWR15
U 1 1 50CB6956
P 3700 8850
F 0 "#PWR15" H 3700 8940 20  0001 C CNN
F 1 "+5V" H 3700 8940 30  0000 C CNN
	1    3700 8850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR16
U 1 1 50CB68F9
P 3700 9700
F 0 "#PWR16" H 3700 9700 30  0001 C CNN
F 1 "GND" H 3700 9630 30  0001 C CNN
	1    3700 9700
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C11
U 1 1 50CB68F8
P 3700 9350
F 0 "C11" V 3650 9390 30  0000 C CNN
F 1 "100nF" H 3750 9420 25  0000 C CNN
	1    3700 9350
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR19
U 1 1 50CB68D4
P 4400 9700
F 0 "#PWR19" H 4400 9700 30  0001 C CNN
F 1 "GND" H 4400 9630 30  0001 C CNN
	1    4400 9700
	1    0    0    -1  
$EndComp
Text Label 950  7500 0    60   ~ 0
PWM for mosfet phase_c low (STM32F100 PB15)
Text Label 950  7400 0    60   ~ 0
PWM for mosfet phase_c high (STM32F100 PA10)
$Comp
L C_MINI C15
U 1 1 50CB6126
P 5100 7250
F 0 "C15" V 5050 7290 30  0000 C CNN
F 1 "100nF" H 5150 7320 25  0000 C CNN
	1    5100 7250
	0    -1   -1   0   
$EndComp
$Comp
L D_SCHOTTKY D4
U 1 1 50CB6125
P 4200 7050
F 0 "D4" V 4110 7000 35  0000 C CNN
F 1 "PMEG6010" H 4300 7150 30  0000 C CNN
	1    4200 7050
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C10
U 1 1 50CB6124
P 3500 7450
F 0 "C10" V 3450 7490 30  0000 C CNN
F 1 "100nF" H 3550 7520 25  0000 C CNN
	1    3500 7450
	0    -1   -1   0   
$EndComp
$Comp
L +12V #PWR13
U 1 1 50CB6123
P 3500 7000
F 0 "#PWR13" H 3500 6950 20  0001 C CNN
F 1 "+12V" H 3500 7100 30  0000 C CNN
	1    3500 7000
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR14
U 1 1 50CB6122
P 3500 7850
F 0 "#PWR14" H 3500 7850 30  0001 C CNN
F 1 "GND" H 3500 7780 30  0001 C CNN
	1    3500 7850
	1    0    0    -1  
$EndComp
$Comp
L IR2181 U4
U 1 1 50CB6121
P 4200 7450
F 0 "U4" H 4250 7250 60  0000 C CNN
F 1 "IR2181" H 4250 7100 60  0000 C CNN
	1    4200 7450
	1    0    0    -1  
$EndComp
$Comp
L IR2181 U3
U 1 1 50CB60BB
P 4200 5650
F 0 "U3" H 4250 5450 60  0000 C CNN
F 1 "IR2181" H 4250 5300 60  0000 C CNN
	1    4200 5650
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR12
U 1 1 50CB60BA
P 3500 6050
F 0 "#PWR12" H 3500 6050 30  0001 C CNN
F 1 "GND" H 3500 5980 30  0001 C CNN
	1    3500 6050
	1    0    0    -1  
$EndComp
$Comp
L +12V #PWR11
U 1 1 50CB60B9
P 3500 5200
F 0 "#PWR11" H 3500 5150 20  0001 C CNN
F 1 "+12V" H 3500 5300 30  0000 C CNN
	1    3500 5200
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C9
U 1 1 50CB60B8
P 3500 5650
F 0 "C9" V 3450 5690 30  0000 C CNN
F 1 "100nF" H 3550 5720 25  0000 C CNN
	1    3500 5650
	0    -1   -1   0   
$EndComp
$Comp
L D_SCHOTTKY D3
U 1 1 50CB60B7
P 4200 5250
F 0 "D3" V 4110 5200 35  0000 C CNN
F 1 "PMEG6010" H 4300 5350 30  0000 C CNN
	1    4200 5250
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C14
U 1 1 50CB60B6
P 5100 5450
F 0 "C14" V 5050 5490 30  0000 C CNN
F 1 "100nF" H 5150 5520 25  0000 C CNN
	1    5100 5450
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R17
U 1 1 50CB60B5
P 5350 5600
F 0 "R17" H 5400 5550 25  0000 C CNN
F 1 "10R" H 5350 5650 25  0000 C CNN
	1    5350 5600
	-1   0    0    1   
$EndComp
$Comp
L R_MINI R18
U 1 1 50CB60B4
P 5350 5800
F 0 "R18" H 5400 5750 25  0000 C CNN
F 1 "10R" H 5350 5850 25  0000 C CNN
	1    5350 5800
	-1   0    0    1   
$EndComp
Text Label 950  5600 0    60   ~ 0
PWM for mosfet phase_b high (STM32F100 PA9)
Text Label 950  5700 0    60   ~ 0
PWM for mosfet phase_b low (STM32F100 PB14)
Text Label 6250 3900 0    60   ~ 0
Motor Phase A
Text Label 6200 3150 0    60   ~ 0
24V battery (up to 33V)
Text Label 950  3900 0    60   ~ 0
PWM for mosfet phase_a low (STM32F100 PB13)
Text Label 950  3800 0    60   ~ 0
PWM for mosfet phase_a high (STM32F100 PA8)
$Comp
L R_MINI R16
U 1 1 50CB1F7E
P 5350 4000
F 0 "R16" H 5400 3950 25  0000 C CNN
F 1 "10R" H 5350 4050 25  0000 C CNN
	1    5350 4000
	-1   0    0    1   
$EndComp
$Comp
L R_MINI R15
U 1 1 50CB1F77
P 5350 3800
F 0 "R15" H 5400 3750 25  0000 C CNN
F 1 "10R" H 5350 3850 25  0000 C CNN
	1    5350 3800
	-1   0    0    1   
$EndComp
$Comp
L C_MINI C13
U 1 1 50CB1F36
P 5100 3650
F 0 "C13" V 5050 3690 30  0000 C CNN
F 1 "100nF" H 5150 3720 25  0000 C CNN
	1    5100 3650
	0    -1   -1   0   
$EndComp
$Comp
L D_SCHOTTKY D2
U 1 1 50CB1DD3
P 4200 3450
F 0 "D2" V 4110 3400 35  0000 C CNN
F 1 "PMEG6010" H 4300 3550 30  0000 C CNN
	1    4200 3450
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C8
U 1 1 50CB1D9D
P 3500 3850
F 0 "C8" V 3450 3890 30  0000 C CNN
F 1 "100nF" H 3550 3920 25  0000 C CNN
	1    3500 3850
	0    -1   -1   0   
$EndComp
$Comp
L +12V #PWR9
U 1 1 50CB1D88
P 3500 3400
F 0 "#PWR9" H 3500 3350 20  0001 C CNN
F 1 "+12V" H 3500 3500 30  0000 C CNN
	1    3500 3400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR10
U 1 1 50CB1D68
P 3500 4250
F 0 "#PWR10" H 3500 4250 30  0001 C CNN
F 1 "GND" H 3500 4180 30  0001 C CNN
	1    3500 4250
	1    0    0    -1  
$EndComp
$Comp
L IR2181 U2
U 1 1 50CB1D32
P 4200 3850
F 0 "U2" H 4250 3650 60  0000 C CNN
F 1 "IR2181" H 4250 3500 60  0000 C CNN
	1    4200 3850
	1    0    0    -1  
$EndComp
Text Label 1650 1300 0    60   ~ 0
24V battery (up to 33V)
$Comp
L CAPAPOL C19
U 1 1 50CB0F08
P 8200 1800
F 0 "C19" H 8250 1900 50  0000 L CNN
F 1 "1uF" H 8250 1700 50  0000 L CNN
	1    8200 1800
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR36
U 1 1 50CB0F07
P 8200 2150
F 0 "#PWR36" H 8200 2150 30  0001 C CNN
F 1 "GND" H 8200 2080 30  0001 C CNN
	1    8200 2150
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR35
U 1 1 50CB0EE1
P 8200 1400
F 0 "#PWR35" H 8200 1490 20  0001 C CNN
F 1 "+5V" H 8200 1490 30  0000 C CNN
	1    8200 1400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR34
U 1 1 50CB0EB0
P 7650 2150
F 0 "#PWR34" H 7650 2150 30  0001 C CNN
F 1 "GND" H 7650 2080 30  0001 C CNN
	1    7650 2150
	1    0    0    -1  
$EndComp
$Comp
L 78L05 U6
U 1 1 50CB0E55
P 7650 1550
F 0 "U6" H 7800 1354 60  0000 C CNN
F 1 "78L05" H 7650 1750 60  0000 C CNN
	1    7650 1550
	1    0    0    -1  
$EndComp
$Comp
L +12V #PWR31
U 1 1 50C9C4C9
P 6750 1400
F 0 "#PWR31" H 6750 1350 20  0001 C CNN
F 1 "+12V" H 6750 1500 30  0000 C CNN
	1    6750 1400
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P1
U 1 1 50C9C473
P 1300 1400
F 0 "P1" V 1250 1400 40  0000 C CNN
F 1 "Battery input" V 1450 1400 40  0000 C CNN
	1    1300 1400
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR30
U 1 1 50C9C10E
P 6500 2150
F 0 "#PWR30" H 6500 2150 30  0001 C CNN
F 1 "GND" H 6500 2080 30  0001 C CNN
	1    6500 2150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R22
U 1 1 50C9C0F1
P 6500 1950
F 0 "R22" H 6550 1900 25  0000 C CNN
F 1 "10k 1%" H 6500 2000 25  0000 C CNN
	1    6500 1950
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R21
U 1 1 50C9C0EE
P 6500 1650
F 0 "R21" H 6550 1600 25  0000 C CNN
F 1 "92k 1%" H 6500 1700 25  0000 C CNN
	1    6500 1650
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR32
U 1 1 50C9C067
P 6750 2150
F 0 "#PWR32" H 6750 2150 30  0001 C CNN
F 1 "GND" H 6750 2080 30  0001 C CNN
	1    6750 2150
	1    0    0    -1  
$EndComp
$Comp
L CAPAPOL C17
U 1 1 50C9C066
P 6750 1800
F 0 "C17" H 6800 1900 50  0000 L CNN
F 1 "47uF" H 6800 1700 50  0000 L CNN
	1    6750 1800
	1    0    0    -1  
$EndComp
$Comp
L L_MINI L1
U 1 1 50C9C043
P 6250 1500
F 0 "L1" H 6175 1450 30  0000 C CNN
F 1 "100uH" H 6250 1550 22  0000 C CNN
	1    6250 1500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR26
U 1 1 50C9C004
P 6000 1900
F 0 "#PWR26" H 6000 1900 30  0001 C CNN
F 1 "GND" H 6000 1830 30  0001 C CNN
	1    6000 1900
	1    0    0    -1  
$EndComp
$Comp
L D_SCHOTTKY D5
U 1 1 50C9BFE3
P 6000 1700
F 0 "D5" V 5910 1650 35  0000 C CNN
F 1 "PMEG6010" H 5950 1550 30  0000 C CNN
	1    6000 1700
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C12
U 1 1 50C9BFA7
P 5750 1400
F 0 "C12" V 5700 1440 30  0000 C CNN
F 1 "100nF" H 5800 1300 25  0000 C CNN
	1    5750 1400
	0    -1   -1   0   
$EndComp
Text Notes 4800 2150 0    60   ~ 0
MAX5035D
$Comp
L C_MINI C7
U 1 1 50C9BB98
P 4300 1800
F 0 "C7" V 4250 1840 30  0000 C CNN
F 1 "100nF" H 4350 1870 25  0000 C CNN
	1    4300 1800
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR25
U 1 1 50C9BB88
P 5750 2150
F 0 "#PWR25" H 5750 2150 30  0001 C CNN
F 1 "GND" H 5750 2080 30  0001 C CNN
	1    5750 2150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR18
U 1 1 50C9BB7C
P 4300 2150
F 0 "#PWR18" H 4300 2150 30  0001 C CNN
F 1 "GND" H 4300 2080 30  0001 C CNN
	1    4300 2150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR61
U 1 1 50BBEA1A
P 12250 2150
F 0 "#PWR61" H 12250 2150 30  0001 C CNN
F 1 "GND" H 12250 2080 30  0001 C CNN
	1    12250 2150
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C24
U 1 1 50BBEA19
P 12250 1950
F 0 "C24" H 12150 2000 30  0000 C CNN
F 1 "10nF" H 12300 2020 25  0000 C CNN
	1    12250 1950
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C23
U 1 1 50BBEA06
P 12100 1950
F 0 "C23" H 12000 2000 30  0000 C CNN
F 1 "10nF" H 12150 2020 25  0000 C CNN
	1    12100 1950
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR60
U 1 1 50BBEA05
P 12100 2150
F 0 "#PWR60" H 12100 2150 30  0001 C CNN
F 1 "GND" H 12100 2080 30  0001 C CNN
	1    12100 2150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR57
U 1 1 50BBE9ED
P 11950 2150
F 0 "#PWR57" H 11950 2150 30  0001 C CNN
F 1 "GND" H 11950 2080 30  0001 C CNN
	1    11950 2150
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C22
U 1 1 50BBE9EC
P 11950 1950
F 0 "C22" H 11850 2000 30  0000 C CNN
F 1 "10nF" H 12000 2020 25  0000 C CNN
	1    11950 1950
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR62
U 1 1 50A57363
P 12750 6300
F 0 "#PWR62" H 12750 6300 30  0001 C CNN
F 1 "GND" H 12750 6230 30  0001 C CNN
	1    12750 6300
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C5
U 1 1 50A57362
P 12750 6050
F 0 "C5" V 12700 6090 30  0000 C CNN
F 1 "100nF" V 12800 6120 25  0000 C CNN
	1    12750 6050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR50
U 1 1 508C12D8
P 11000 2100
F 0 "#PWR50" H 11000 2100 30  0001 C CNN
F 1 "GND" H 11000 2030 30  0001 C CNN
	1    11000 2100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR43
U 1 1 508C1271
P 9000 3250
F 0 "#PWR43" H 9000 3250 30  0001 C CNN
F 1 "GND" H 9000 3180 30  0001 C CNN
	1    9000 3250
	1    0    0    -1  
$EndComp
Text Notes 13150 3650 3    50   ~ 0
Note: 3V3 power\nsource is from\nSTM32F100\nheader board.
$Comp
L R_MINI R36
U 1 1 508468AB
P 9600 2900
F 0 "R36" H 9600 2850 25  0000 C CNN
F 1 "3K6" H 9600 2950 25  0000 C CNN
	1    9600 2900
	-1   0    0    1   
$EndComp
$Comp
L R_MINI R33
U 1 1 508468A4
P 9200 4150
F 0 "R33" H 9200 4100 25  0000 C CNN
F 1 "3K6" H 9200 4200 25  0000 C CNN
	1    9200 4150
	-1   0    0    1   
$EndComp
Text Notes 9900 7150 0    150  ~ 0
STM32F100\n(Bravekit.com Header board)
Text Label 1750 9300 0    60   ~ 0
Voltage_signal (STM32F100 PA1)
$Comp
L R_MINI R3
U 1 1 508417B2
P 1500 9300
F 0 "R3" H 1500 9250 25  0000 C CNN
F 1 "2K2" H 1500 9350 25  0000 C CNN
	1    1500 9300
	-1   0    0    1   
$EndComp
$Comp
L C_MINI C2
U 1 1 50831587
P 8550 5950
F 0 "C2" V 8500 5990 30  0000 C CNN
F 1 "100nF" V 8600 6020 25  0000 C CNN
	1    8550 5950
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R6
U 1 1 50841760
P 9150 5900
F 0 "R6" H 9150 5850 25  0000 C CNN
F 1 "3K6" H 9150 5950 25  0000 C CNN
	1    9150 5900
	-1   0    0    1   
$EndComp
$Comp
L +3.3V #PWR59
U 1 1 5083CE03
P 11950 8450
F 0 "#PWR59" H 11950 8410 30  0001 C CNN
F 1 "+3.3V" V 11950 8600 30  0000 C CNN
	1    11950 8450
	0    1    1    0   
$EndComp
Text Label 12350 2800 0    60   ~ 0
UART TX (STM32F100 PB10)
Text Label 12350 2700 0    60   ~ 0
UART RX (STM32F100 PB11)
$Comp
L +3.3V #PWR66
U 1 1 5083C9AC
P 13500 3700
F 0 "#PWR66" H 13500 3660 30  0001 C CNN
F 1 "+3.3V" H 13500 3810 30  0000 C CNN
	1    13500 3700
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR67
U 1 1 5083C9A1
P 13500 4050
F 0 "#PWR67" H 13500 4050 30  0001 C CNN
F 1 "GND" H 13500 3980 30  0001 C CNN
	1    13500 4050
	1    0    0    -1  
$EndComp
NoConn ~ 14900 4000
NoConn ~ 13700 2900
NoConn ~ 13700 3000
NoConn ~ 13700 3100
NoConn ~ 13700 3200
NoConn ~ 13700 3300
NoConn ~ 13700 3400
NoConn ~ 13700 3500
NoConn ~ 13700 3600
NoConn ~ 13700 3700
NoConn ~ 13700 4000
NoConn ~ 13700 4100
NoConn ~ 13700 4200
NoConn ~ 13700 4300
NoConn ~ 14900 4300
NoConn ~ 14900 4200
NoConn ~ 14900 4100
NoConn ~ 14900 3900
NoConn ~ 14900 3800
NoConn ~ 14900 3700
NoConn ~ 14900 3600
NoConn ~ 14900 3500
NoConn ~ 14900 3400
NoConn ~ 14900 3300
NoConn ~ 14900 3200
NoConn ~ 14900 3100
NoConn ~ 14900 3000
NoConn ~ 14900 2900
NoConn ~ 14900 2800
NoConn ~ 14900 2700
$Comp
L BLUETOOTH_MODULE P7
U 1 1 5083C8F8
P 14300 3500
F 0 "P7" H 14300 4400 70  0000 C CNN
F 1 "BLUETOOTH_MODULE" V 14300 3500 70  0000 C CNN
	1    14300 3500
	1    0    0    -1  
$EndComp
Text Label 12350 1750 0    60   ~ 0
Hall sensor phase_a (STM32F100 PA6)
Text Label 12350 1650 0    60   ~ 0
Hall sensor phase_b (STM32F100 PA7)
Text Label 12350 1550 0    60   ~ 0
Hall sensor phase_c (STM32F100 PB0)
$Comp
L +5V #PWR49
U 1 1 50832572
P 10950 1850
F 0 "#PWR49" H 10950 1940 20  0001 C CNN
F 1 "+5V" V 10900 1950 30  0000 C CNN
	1    10950 1850
	0    1    1    0   
$EndComp
$Comp
L CONN_5 P3
U 1 1 50832540
P 10500 1750
F 0 "P3" V 10450 1750 50  0000 C CNN
F 1 "Hall sensors" V 10550 1750 50  0000 C CNN
	1    10500 1750
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR2
U 1 1 508324F5
P 1300 9650
F 0 "#PWR2" H 1300 9650 30  0001 C CNN
F 1 "GND" H 1300 9580 30  0001 C CNN
	1    1300 9650
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C1
U 1 1 508324F4
P 1300 9450
F 0 "C1" V 1250 9490 30  0000 C CNN
F 1 "10nF" H 1350 9520 25  0000 C CNN
	1    1300 9450
	0    -1   -1   0   
$EndComp
Text Label 1250 8950 0    60   ~ 0
24V battery (up to 33V)
$Comp
L R_MINI R1
U 1 1 5083228E
P 1050 9150
F 0 "R1" H 1050 9100 25  0000 C CNN
F 1 "100K 1%" H 1050 9200 25  0000 C CNN
	1    1050 9150
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R2
U 1 1 5083228D
P 1050 9450
F 0 "R2" H 1100 9400 25  0000 C CNN
F 1 "10K 1%" H 1050 9500 25  0000 C CNN
	1    1050 9450
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR1
U 1 1 5083228C
P 1050 9650
F 0 "#PWR1" H 1050 9650 30  0001 C CNN
F 1 "GND" H 1050 9580 30  0001 C CNN
	1    1050 9650
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR44
U 1 1 5083200B
P 9000 3800
F 0 "#PWR44" H 9000 3760 30  0001 C CNN
F 1 "+3.3V" H 9000 3910 30  0000 C CNN
	1    9000 3800
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P4
U 1 1 50831FC0
P 8500 4250
F 0 "P4" V 8450 4250 40  0000 C CNN
F 1 "Brake" V 8550 4250 40  0000 C CNN
	1    8500 4250
	-1   0    0    1   
$EndComp
Text Label 9400 4150 0    60   ~ 0
Brake_signal (STM32F100 PB12)
$Comp
L R_MINI R29
U 1 1 50831F42
P 9000 4000
F 0 "R29" H 9000 3950 25  0000 C CNN
F 1 "10K" H 9000 4050 25  0000 C CNN
	1    9000 4000
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR45
U 1 1 50831F3E
P 9000 4500
F 0 "#PWR45" H 9000 4500 30  0001 C CNN
F 1 "GND" H 9000 4430 30  0001 C CNN
	1    9000 4500
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C20
U 1 1 50831F3D
P 9000 4300
F 0 "C20" V 8950 4340 30  0000 C CNN
F 1 "10nF" H 9050 4370 25  0000 C CNN
	1    9000 4300
	0    -1   -1   0   
$EndComp
$Comp
L C_MINI C21
U 1 1 50831E6F
P 9400 3050
F 0 "C21" V 9350 3090 30  0000 C CNN
F 1 "10nF" H 9450 3120 25  0000 C CNN
	1    9400 3050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR47
U 1 1 50831E6E
P 9400 3250
F 0 "#PWR47" H 9400 3250 30  0001 C CNN
F 1 "GND" H 9400 3180 30  0001 C CNN
	1    9400 3250
	1    0    0    -1  
$EndComp
$Comp
L CONN_3 K1
U 1 1 50831D6C
P 8500 2700
F 0 "K1" V 8450 2700 50  0000 C CNN
F 1 "Throttle" V 8550 2700 40  0000 C CNN
	1    8500 2700
	-1   0    0    1   
$EndComp
$Comp
L +5V #PWR41
U 1 1 50831D0B
P 8950 2700
F 0 "#PWR41" H 8950 2790 20  0001 C CNN
F 1 "+5V" V 8900 2800 30  0000 C CNN
	1    8950 2700
	0    1    1    0   
$EndComp
$Comp
L R_MINI R31
U 1 1 50831D06
P 9200 2750
F 0 "R31" H 9200 2700 25  0000 C CNN
F 1 "3K6 1%" H 9200 2800 25  0000 C CNN
	1    9200 2750
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R32
U 1 1 50831D05
P 9200 3050
F 0 "R32" H 9250 3000 25  0000 C CNN
F 1 "6K8 1%" H 9200 3100 25  0000 C CNN
	1    9200 3050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR46
U 1 1 50831D04
P 9200 3250
F 0 "#PWR46" H 9200 3250 30  0001 C CNN
F 1 "GND" H 9200 3180 30  0001 C CNN
	1    9200 3250
	1    0    0    -1  
$EndComp
Text Label 9750 2900 0    60   ~ 0
Throttle_signal (STM32F100 PA0)
$Comp
L GND #PWR42
U 1 1 50831B19
P 8950 6250
F 0 "#PWR42" H 8950 6250 30  0001 C CNN
F 1 "GND" H 8950 6180 30  0001 C CNN
	1    8950 6250
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R5
U 1 1 50831B08
P 8950 6050
F 0 "R5" H 9000 6000 25  0000 C CNN
F 1 "6K8 1%" H 8950 6100 25  0000 C CNN
	1    8950 6050
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R4
U 1 1 50831AF9
P 8950 5750
F 0 "R4" H 8950 5700 25  0000 C CNN
F 1 "3K6 1%" H 8950 5800 25  0000 C CNN
	1    8950 5750
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR39
U 1 1 50831623
P 8550 6250
F 0 "#PWR39" H 8550 6250 30  0001 C CNN
F 1 "GND" H 8550 6180 30  0001 C CNN
	1    8550 6250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR40
U 1 1 50831321
P 8750 6250
F 0 "#PWR40" H 8750 6250 30  0001 C CNN
F 1 "GND" H 8750 6180 30  0001 C CNN
	1    8750 6250
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR38
U 1 1 508312E5
P 8550 5450
F 0 "#PWR38" H 8550 5540 20  0001 C CNN
F 1 "+5V" H 8550 5540 30  0000 C CNN
	1    8550 5450
	1    0    0    -1  
$EndComp
$Comp
L ACS754_ACS755_ACS756_HALLCURRENTSENSOR IC1
U 1 1 50830D7C
P 8200 5700
F 0 "IC1" H 8200 5900 60  0000 C CNN
F 1 "ACS756SCA-050B" H 8250 6050 60  0000 C CNN
	1    8200 5700
	0    -1   -1   0   
$EndComp
$Comp
L D_SCHOTTKY D1
U 1 1 50C9176C
P 3750 1300
F 0 "D1" V 3660 1250 35  0000 C CNN
F 1 "PMEG6010" H 3850 1400 30  0000 C CNN
	1    3750 1300
	1    0    0    -1  
$EndComp
$Comp
L CAPAPOL C6
U 1 1 50C91A36
P 4000 1550
F 0 "C6" H 4050 1650 50  0000 L CNN
F 1 "47uF" H 4050 1450 50  0000 L CNN
	1    4000 1550
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR17
U 1 1 50C91A58
P 4000 1850
F 0 "#PWR17" H 4000 1850 30  0001 C CNN
F 1 "GND" H 4000 1780 30  0001 C CNN
	1    4000 1850
	1    0    0    -1  
$EndComp
$Comp
L MAX5035 U1
U 1 1 50C91F02
P 5050 1600
F 0 "U1" H 5000 2100 60  0000 C CNN
F 1 "MAX5035" H 5050 1200 60  0000 C CNN
	1    5050 1600
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR6
U 1 1 50CCA010
P 3350 4250
F 0 "#PWR6" H 3350 4250 30  0001 C CNN
F 1 "GND" H 3350 4180 30  0001 C CNN
	1    3350 4250
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R10
U 1 1 50CCA016
P 3350 4050
F 0 "R10" H 3400 4000 25  0000 C CNN
F 1 "100k" H 3350 4100 25  0000 C CNN
	1    3350 4050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR3
U 1 1 50CCA01D
P 3200 4250
F 0 "#PWR3" H 3200 4250 30  0001 C CNN
F 1 "GND" H 3200 4180 30  0001 C CNN
	1    3200 4250
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R7
U 1 1 50CCA023
P 3200 4050
F 0 "R7" H 3250 4000 25  0000 C CNN
F 1 "100k" H 3200 4100 25  0000 C CNN
	1    3200 4050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR7
U 1 1 50CCAE1A
P 3350 6050
F 0 "#PWR7" H 3350 6050 30  0001 C CNN
F 1 "GND" H 3350 5980 30  0001 C CNN
	1    3350 6050
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R11
U 1 1 50CCAE20
P 3350 5850
F 0 "R11" H 3400 5800 25  0000 C CNN
F 1 "100k" H 3350 5900 25  0000 C CNN
	1    3350 5850
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR4
U 1 1 50CCAE27
P 3200 6050
F 0 "#PWR4" H 3200 6050 30  0001 C CNN
F 1 "GND" H 3200 5980 30  0001 C CNN
	1    3200 6050
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R8
U 1 1 50CCAE2D
P 3200 5850
F 0 "R8" H 3250 5800 25  0000 C CNN
F 1 "100k" H 3200 5900 25  0000 C CNN
	1    3200 5850
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR8
U 1 1 50CCB13B
P 3350 7850
F 0 "#PWR8" H 3350 7850 30  0001 C CNN
F 1 "GND" H 3350 7780 30  0001 C CNN
	1    3350 7850
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R12
U 1 1 50CCB141
P 3350 7650
F 0 "R12" H 3400 7600 25  0000 C CNN
F 1 "100k" H 3350 7700 25  0000 C CNN
	1    3350 7650
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR5
U 1 1 50CCB148
P 3200 7850
F 0 "#PWR5" H 3200 7850 30  0001 C CNN
F 1 "GND" H 3200 7780 30  0001 C CNN
	1    3200 7850
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R9
U 1 1 50CCB14E
P 3200 7650
F 0 "R9" H 3250 7600 25  0000 C CNN
F 1 "100k" H 3200 7700 25  0000 C CNN
	1    3200 7650
	0    -1   -1   0   
$EndComp
$Comp
L R_MINI R23
U 1 1 50CCAFC3
P 5700 3750
F 0 "R23" H 5750 3700 25  0000 C CNN
F 1 "100k" H 5700 3800 25  0000 C CNN
	1    5700 3750
	0    1    1    0   
$EndComp
$Comp
L R_MINI R24
U 1 1 50CCB150
P 5700 4450
F 0 "R24" H 5750 4400 25  0000 C CNN
F 1 "100K" H 5700 4500 25  0000 C CNN
	1    5700 4450
	0    1    1    0   
$EndComp
$Comp
L CAPAPOL C3
U 1 1 50CCFC6D
P 2450 1550
F 0 "C3" H 2500 1650 50  0000 L CNN
F 1 "10mF" H 2500 1450 50  0000 L CNN
	1    2450 1550
	1    0    0    -1  
$EndComp
Text Label 6250 5700 0    60   ~ 0
Motor Phase B
Text Label 6200 4950 0    60   ~ 0
24V battery (up to 33V)
$Comp
L R_MINI R25
U 1 1 50CDAD15
P 5700 5550
F 0 "R25" H 5750 5500 25  0000 C CNN
F 1 "100k" H 5700 5600 25  0000 C CNN
	1    5700 5550
	0    1    1    0   
$EndComp
$Comp
L R_MINI R26
U 1 1 50CDAD1B
P 5700 6250
F 0 "R26" H 5750 6200 25  0000 C CNN
F 1 "100K" H 5700 6300 25  0000 C CNN
	1    5700 6250
	0    1    1    0   
$EndComp
$Comp
L R_MINI R20
U 1 1 50CB6128
P 5350 7600
F 0 "R20" H 5400 7550 25  0000 C CNN
F 1 "10R" H 5350 7650 25  0000 C CNN
	1    5350 7600
	-1   0    0    1   
$EndComp
$Comp
L R_MINI R19
U 1 1 50CB6127
P 5350 7400
F 0 "R19" H 5400 7350 25  0000 C CNN
F 1 "10R" H 5350 7450 25  0000 C CNN
	1    5350 7400
	-1   0    0    1   
$EndComp
Text Label 6250 7500 0    60   ~ 0
Motor Phase C
Text Label 6200 6750 0    60   ~ 0
24V battery (up to 33V)
$Comp
L R_MINI R27
U 1 1 50CDAD4C
P 5700 7350
F 0 "R27" H 5750 7300 25  0000 C CNN
F 1 "100k" H 5700 7400 25  0000 C CNN
	1    5700 7350
	0    1    1    0   
$EndComp
$Comp
L R_MINI R28
U 1 1 50CDAD52
P 5700 8050
F 0 "R28" H 5750 8000 25  0000 C CNN
F 1 "100K" H 5700 8100 25  0000 C CNN
	1    5700 8050
	0    1    1    0   
$EndComp
$Comp
L R_MINI R34
U 1 1 50FDCF52
P 11300 1950
F 0 "R34" H 11350 1900 25  0000 C CNN
F 1 "6K8 1%" H 11300 2000 25  0000 C CNN
	1    11300 1950
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR52
U 1 1 50FDCF58
P 11300 2150
F 0 "#PWR52" H 11300 2150 30  0001 C CNN
F 1 "GND" H 11300 2080 30  0001 C CNN
	1    11300 2150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R37
U 1 1 50FDD52A
P 11450 1950
F 0 "R37" H 11500 1900 25  0000 C CNN
F 1 "6K8 1%" H 11450 2000 25  0000 C CNN
	1    11450 1950
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR54
U 1 1 50FDD530
P 11450 2150
F 0 "#PWR54" H 11450 2150 30  0001 C CNN
F 1 "GND" H 11450 2080 30  0001 C CNN
	1    11450 2150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R39
U 1 1 50FDD537
P 11600 1950
F 0 "R39" H 11650 1900 25  0000 C CNN
F 1 "6K8 1%" H 11600 2000 25  0000 C CNN
	1    11600 1950
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR56
U 1 1 50FDD53D
P 11600 2150
F 0 "#PWR56" H 11600 2150 30  0001 C CNN
F 1 "GND" H 11600 2080 30  0001 C CNN
	1    11600 2150
	1    0    0    -1  
$EndComp
$Comp
L CONN_8X2 P2
U 1 1 50FDDAE2
P 11400 8100
F 0 "P2" H 11400 8550 60  0000 C CNN
F 1 "EXT1" V 11400 8100 50  0000 C CNN
	1    11400 8100
	1    0    0    -1  
$EndComp
$Comp
L CONN_8X2 P5
U 1 1 50FDDAF9
P 11400 9250
F 0 "P5" H 11400 9700 60  0000 C CNN
F 1 "EXT2" V 11400 9250 50  0000 C CNN
	1    11400 9250
	1    0    0    -1  
$EndComp
Text Label 9350 8150 0    60   ~ 0
Throttle_signal (STM32F100 PA0)
Text Label 11950 8150 0    60   ~ 0
Voltage_signal (STM32F100 PA1)
Text Label 9350 8050 0    60   ~ 0
Current_signal (STM32F100 PA2)
Text Label 14050 8050 2    60   ~ 0
Mosfets_temperature_signal (STM32F100 PA3)
$Comp
L GND #PWR48
U 1 1 50FDECD7
P 10900 8500
F 0 "#PWR48" H 10900 8500 30  0001 C CNN
F 1 "GND" H 10900 8430 30  0001 C CNN
	1    10900 8500
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR58
U 1 1 50FDF1A0
P 11950 8350
F 0 "#PWR58" H 11950 8440 20  0001 C CNN
F 1 "+5V" V 11950 8500 30  0000 C CNN
	1    11950 8350
	0    1    1    0   
$EndComp
Wire Wire Line
	1800 1850 3350 1850
Connection ~ 3150 1300
Wire Wire Line
	3150 1300 3150 1450
Connection ~ 2450 1850
Wire Wire Line
	2450 1850 2450 1750
Wire Wire Line
	7100 1900 7100 2150
Wire Wire Line
	8150 5050 8350 5050
Wire Wire Line
	8150 5050 8150 5300
Wire Wire Line
	1800 1850 1800 1500
Wire Wire Line
	1800 1500 1650 1500
Connection ~ 5700 7500
Wire Wire Line
	5700 7500 5700 7450
Connection ~ 5700 7900
Wire Wire Line
	5700 7950 5700 7900
Connection ~ 5700 7200
Wire Wire Line
	5700 7250 5700 7200
Wire Wire Line
	5450 7400 5550 7400
Wire Wire Line
	5450 7600 5550 7600
Wire Wire Line
	7300 6750 6100 6750
Connection ~ 6100 7500
Wire Wire Line
	5550 7600 5550 7900
Wire Wire Line
	5550 7200 5800 7200
Wire Wire Line
	5550 7400 5550 7200
Wire Wire Line
	4800 7500 6900 7500
Wire Wire Line
	5550 7900 5800 7900
Wire Wire Line
	6100 7300 6100 7600
Wire Wire Line
	6100 6750 6100 6900
Connection ~ 5700 5700
Wire Wire Line
	5700 5700 5700 5650
Connection ~ 5700 6100
Wire Wire Line
	5700 6150 5700 6100
Connection ~ 5700 5400
Wire Wire Line
	5700 5450 5700 5400
Wire Wire Line
	5450 5600 5550 5600
Wire Wire Line
	5450 5800 5550 5800
Wire Wire Line
	7300 4950 6100 4950
Connection ~ 6100 5700
Wire Wire Line
	5550 5800 5550 6100
Wire Wire Line
	5550 5400 5800 5400
Wire Wire Line
	5550 5600 5550 5400
Wire Wire Line
	4800 5700 6900 5700
Wire Wire Line
	5550 6100 5800 6100
Wire Wire Line
	6100 5500 6100 5800
Wire Wire Line
	6100 4950 6100 5100
Connection ~ 5700 3900
Wire Wire Line
	5700 3900 5700 3850
Wire Wire Line
	5700 4550 5700 4650
Connection ~ 5700 4300
Wire Wire Line
	5700 4350 5700 4300
Connection ~ 5700 3600
Wire Wire Line
	5700 3650 5700 3600
Connection ~ 2450 1300
Wire Wire Line
	2450 1300 2450 1350
Connection ~ 5100 7500
Connection ~ 5100 5700
Wire Wire Line
	5450 3800 5550 3800
Wire Wire Line
	5450 4000 5550 4000
Connection ~ 5100 3900
Connection ~ 3350 7400
Wire Wire Line
	3350 7550 3350 7400
Connection ~ 3200 7500
Wire Wire Line
	3200 7550 3200 7500
Wire Wire Line
	3200 7750 3200 7850
Wire Wire Line
	3350 7750 3350 7850
Connection ~ 3350 5600
Wire Wire Line
	3350 5750 3350 5600
Connection ~ 3200 5700
Wire Wire Line
	3200 5750 3200 5700
Wire Wire Line
	3200 5950 3200 6050
Wire Wire Line
	3350 5950 3350 6050
Connection ~ 3350 3800
Wire Wire Line
	3350 3950 3350 3800
Connection ~ 3200 3900
Wire Wire Line
	3200 3950 3200 3900
Wire Wire Line
	3200 4150 3200 4250
Wire Wire Line
	3350 4150 3350 4250
Wire Wire Line
	3800 8950 3700 8950
Wire Wire Line
	900  7400 3650 7400
Wire Wire Line
	4800 7600 5250 7600
Connection ~ 4900 7050
Wire Wire Line
	4350 7050 5100 7050
Wire Wire Line
	5100 7050 5100 7150
Wire Wire Line
	4800 7300 4900 7300
Wire Wire Line
	4900 7300 4900 7050
Connection ~ 3500 7600
Wire Wire Line
	3500 7550 3500 7850
Wire Wire Line
	3500 7300 3650 7300
Wire Wire Line
	3650 7600 3500 7600
Wire Wire Line
	3500 7000 3500 7350
Connection ~ 3500 7300
Wire Wire Line
	4050 7050 3500 7050
Connection ~ 3500 7050
Wire Wire Line
	5100 7350 5100 7500
Wire Wire Line
	4800 7400 5250 7400
Wire Wire Line
	900  7500 3650 7500
Wire Wire Line
	900  5700 3650 5700
Wire Wire Line
	4800 5600 5250 5600
Wire Wire Line
	5100 5550 5100 5700
Connection ~ 3500 5250
Wire Wire Line
	3500 5250 4050 5250
Connection ~ 3500 5500
Wire Wire Line
	3500 5200 3500 5550
Wire Wire Line
	3650 5800 3500 5800
Wire Wire Line
	3500 5500 3650 5500
Wire Wire Line
	3500 5750 3500 6050
Connection ~ 3500 5800
Wire Wire Line
	4900 5250 4900 5500
Wire Wire Line
	4900 5500 4800 5500
Wire Wire Line
	5100 5250 5100 5350
Wire Wire Line
	4350 5250 5100 5250
Connection ~ 4900 5250
Wire Wire Line
	4800 5800 5250 5800
Wire Wire Line
	900  5600 3650 5600
Wire Wire Line
	7300 3150 6100 3150
Connection ~ 6100 3900
Wire Wire Line
	5550 4000 5550 4300
Wire Wire Line
	5550 3600 5800 3600
Wire Wire Line
	5550 3800 5550 3600
Wire Wire Line
	900  3800 3650 3800
Wire Wire Line
	4800 4000 5250 4000
Connection ~ 4900 3450
Wire Wire Line
	4350 3450 5100 3450
Wire Wire Line
	5100 3450 5100 3550
Wire Wire Line
	4800 3700 4900 3700
Wire Wire Line
	4900 3700 4900 3450
Connection ~ 3500 4000
Wire Wire Line
	3500 3950 3500 4250
Wire Wire Line
	3500 3700 3650 3700
Wire Wire Line
	1650 1300 3600 1300
Wire Wire Line
	8200 2000 8200 2150
Wire Wire Line
	8050 1500 8200 1500
Wire Wire Line
	6350 1500 7250 1500
Connection ~ 6500 1800
Wire Wire Line
	6500 1800 6250 1800
Wire Wire Line
	6250 1800 6250 2050
Wire Wire Line
	6250 2050 5850 2050
Wire Wire Line
	5850 2050 5850 1700
Wire Wire Line
	5850 1700 5650 1700
Connection ~ 6500 1500
Wire Wire Line
	6500 1550 6500 1500
Wire Wire Line
	6750 2000 6750 2150
Connection ~ 6000 1500
Wire Wire Line
	5650 1500 6150 1500
Connection ~ 5750 1500
Wire Wire Line
	6000 1500 6000 1550
Wire Wire Line
	5650 1900 5750 1900
Connection ~ 12100 1650
Wire Wire Line
	12100 1650 12100 1850
Connection ~ 11950 1550
Wire Wire Line
	11950 1550 11950 1850
Wire Notes Line
	8450 9800 14450 9800
Wire Wire Line
	10900 1950 11000 1950
Wire Wire Line
	11000 1950 11000 2100
Wire Wire Line
	9000 3250 9000 2800
Wire Wire Line
	9000 2800 8850 2800
Wire Notes Line
	9350 7450 8450 7450
Wire Wire Line
	9300 4150 10850 4150
Wire Wire Line
	9700 2900 11250 2900
Wire Notes Line
	8450 7450 8450 9800
Wire Notes Line
	14450 9800 14450 7450
Wire Wire Line
	10900 1650 14150 1650
Wire Wire Line
	10900 1750 14150 1750
Wire Wire Line
	10900 1550 14150 1550
Wire Wire Line
	9250 5900 10700 5900
Wire Wire Line
	2350 8950 1050 8950
Wire Wire Line
	12350 2700 13700 2700
Wire Wire Line
	13700 3800 13500 3800
Wire Wire Line
	13500 4050 13500 3900
Wire Wire Line
	1300 9650 1300 9550
Wire Wire Line
	1050 9550 1050 9650
Wire Wire Line
	1050 9250 1050 9350
Connection ~ 1050 9300
Connection ~ 9000 4450
Wire Wire Line
	9000 4450 8900 4450
Wire Wire Line
	8900 4450 8900 4350
Wire Wire Line
	8900 4350 8850 4350
Wire Wire Line
	9000 3800 9000 3900
Connection ~ 9000 4150
Wire Wire Line
	9000 4400 9000 4500
Wire Wire Line
	9400 3250 9400 3150
Connection ~ 8950 5900
Wire Wire Line
	8950 5850 8950 5950
Wire Wire Line
	8550 6250 8550 6050
Wire Wire Line
	8550 5450 8550 5850
Wire Wire Line
	8750 6250 8750 5700
Wire Wire Line
	8750 5700 8400 5700
Wire Wire Line
	8400 5800 8550 5800
Connection ~ 8550 5800
Wire Wire Line
	8400 5600 8950 5600
Wire Wire Line
	8950 5600 8950 5650
Wire Wire Line
	8950 6150 8950 6250
Wire Wire Line
	9200 3150 9200 3250
Wire Wire Line
	9200 2650 9200 2600
Wire Wire Line
	9200 2600 8850 2600
Wire Wire Line
	8950 2700 8850 2700
Wire Wire Line
	9200 2850 9200 2950
Connection ~ 9200 2900
Wire Wire Line
	9400 2950 9400 2900
Connection ~ 9400 2900
Wire Wire Line
	9000 4100 9000 4200
Wire Wire Line
	1050 8950 1050 9050
Wire Wire Line
	1300 9350 1300 9300
Connection ~ 1300 9300
Wire Wire Line
	10950 1850 10900 1850
Wire Wire Line
	13500 3900 13700 3900
Wire Wire Line
	13500 3800 13500 3700
Wire Wire Line
	12350 2800 13700 2800
Wire Wire Line
	1050 9300 1400 9300
Wire Wire Line
	9050 5900 8950 5900
Wire Wire Line
	1600 9300 3200 9300
Wire Wire Line
	9200 2900 9500 2900
Wire Wire Line
	8850 4150 9100 4150
Wire Notes Line
	14450 7450 9300 7450
Wire Wire Line
	12750 6300 12750 6150
Wire Wire Line
	11950 2150 11950 2050
Wire Wire Line
	12100 2150 12100 2050
Wire Wire Line
	12250 2150 12250 2050
Wire Wire Line
	12250 1850 12250 1750
Connection ~ 12250 1750
Wire Wire Line
	3900 1300 4400 1300
Wire Wire Line
	4000 1350 4000 1300
Wire Wire Line
	4000 1750 4000 1850
Connection ~ 4000 1300
Wire Wire Line
	4400 1900 4300 1900
Wire Wire Line
	4300 1900 4300 2150
Wire Wire Line
	5750 1900 5750 2150
Wire Wire Line
	4400 1700 4300 1700
Wire Wire Line
	4400 1500 4300 1500
Wire Wire Line
	4300 1500 4300 1300
Connection ~ 4300 1300
Wire Wire Line
	5750 1300 5650 1300
Wire Wire Line
	6000 1850 6000 1900
Wire Wire Line
	6500 1750 6500 1850
Wire Wire Line
	6500 2050 6500 2150
Wire Wire Line
	6750 1400 6750 1600
Connection ~ 6750 1500
Wire Wire Line
	7650 1800 7650 2150
Wire Wire Line
	8200 1400 8200 1600
Connection ~ 8200 1500
Wire Wire Line
	3650 4000 3500 4000
Wire Wire Line
	3500 3400 3500 3750
Connection ~ 3500 3700
Wire Wire Line
	4050 3450 3500 3450
Connection ~ 3500 3450
Wire Wire Line
	4800 3900 6900 3900
Wire Wire Line
	5100 3750 5100 3900
Wire Wire Line
	4800 3800 5250 3800
Wire Wire Line
	900  3900 3650 3900
Wire Wire Line
	5550 4300 5800 4300
Wire Wire Line
	6100 3700 6100 4000
Wire Wire Line
	6100 3150 6100 3300
Wire Wire Line
	4400 9650 4400 9700
Wire Wire Line
	3700 9700 3700 9450
Wire Wire Line
	3700 8850 3700 9250
Connection ~ 3700 8950
Connection ~ 5500 9250
Wire Wire Line
	5500 9300 5500 9250
Connection ~ 5300 9250
Wire Wire Line
	5300 9200 5300 9300
Wire Wire Line
	4950 8950 5300 8950
Wire Wire Line
	5300 8950 5300 9000
Wire Wire Line
	5300 9500 5300 9600
Wire Wire Line
	5500 9600 5500 9500
Wire Wire Line
	5300 9250 7650 9250
Wire Wire Line
	8150 6100 8150 6500
Wire Wire Line
	8150 6500 8800 6500
Wire Wire Line
	8350 5050 8350 5200
Wire Wire Line
	7100 1500 7100 1700
Connection ~ 7100 1500
Wire Wire Line
	6100 4400 6100 4650
Wire Wire Line
	6100 8000 6100 8250
Wire Wire Line
	5700 8150 5700 8250
Wire Wire Line
	5700 6350 5700 6450
Wire Wire Line
	6100 6200 6100 6450
Wire Wire Line
	3150 1650 3150 1850
Connection ~ 3150 1850
Wire Wire Line
	3350 1850 3350 1650
Wire Wire Line
	3350 1300 3350 1450
Wire Wire Line
	2950 1300 2950 1450
Wire Wire Line
	2950 1650 2950 1850
Wire Wire Line
	2750 1650 2750 1850
Wire Wire Line
	2750 1300 2750 1450
Connection ~ 3350 1850
Connection ~ 3350 1300
Connection ~ 2750 1300
Connection ~ 2950 1300
Connection ~ 2950 1850
Connection ~ 2750 1850
Wire Wire Line
	11300 2050 11300 2150
Wire Wire Line
	11300 1450 11300 1850
Connection ~ 11300 1550
Wire Wire Line
	11450 2050 11450 2150
Wire Wire Line
	11600 2050 11600 2150
Wire Wire Line
	11450 1450 11450 1850
Connection ~ 11450 1650
Wire Wire Line
	11600 1450 11600 1850
Connection ~ 11600 1750
Wire Wire Line
	11000 8150 9350 8150
Wire Wire Line
	11800 8150 13450 8150
Wire Wire Line
	11000 8050 9350 8050
Wire Wire Line
	11800 8050 14050 8050
Wire Wire Line
	10900 8500 10900 8450
Wire Wire Line
	10900 8450 11000 8450
Wire Wire Line
	11950 8450 11800 8450
Wire Wire Line
	11950 8350 11800 8350
$Comp
L +5V #PWR51
U 1 1 50FDFBA3
P 11300 1150
F 0 "#PWR51" H 11300 1240 20  0001 C CNN
F 1 "+5V" H 11300 1240 30  0000 C CNN
	1    11300 1150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R30
U 1 1 50FDFBA9
P 11300 1350
F 0 "R30" H 11400 1300 25  0000 C CNN
F 1 "3K6" H 11300 1400 25  0000 C CNN
	1    11300 1350
	0    -1   -1   0   
$EndComp
Wire Wire Line
	11300 1150 11300 1250
$Comp
L +5V #PWR53
U 1 1 50FDFBB1
P 11450 1150
F 0 "#PWR53" H 11450 1240 20  0001 C CNN
F 1 "+5V" H 11450 1240 30  0000 C CNN
	1    11450 1150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R35
U 1 1 50FDFBB7
P 11450 1350
F 0 "R35" H 11550 1300 25  0000 C CNN
F 1 "3K6" H 11450 1400 25  0000 C CNN
	1    11450 1350
	0    -1   -1   0   
$EndComp
Wire Wire Line
	11450 1150 11450 1250
$Comp
L +5V #PWR55
U 1 1 50FDFBBF
P 11600 1150
F 0 "#PWR55" H 11600 1240 20  0001 C CNN
F 1 "+5V" H 11600 1240 30  0000 C CNN
	1    11600 1150
	1    0    0    -1  
$EndComp
$Comp
L R_MINI R38
U 1 1 50FDFBC5
P 11600 1350
F 0 "R38" H 11700 1300 25  0000 C CNN
F 1 "3K6" H 11600 1400 25  0000 C CNN
	1    11600 1350
	0    -1   -1   0   
$EndComp
Wire Wire Line
	11600 1150 11600 1250
Text Label 11950 9000 0    60   ~ 0
PWM for mosfet phase_a low (STM32F100 PB13)
Text Label 8600 9100 0    60   ~ 0
PWM for mosfet phase_a high (STM32F100 PA8)
Wire Wire Line
	8600 9100 11000 9100
Wire Wire Line
	11800 9000 14200 9000
Text Label 8600 9000 0    60   ~ 0
PWM for mosfet phase_b low (STM32F100 PB14)
Wire Wire Line
	8600 9000 11000 9000
Text Label 11950 9200 0    60   ~ 0
PWM for mosfet phase_b high (STM32F100 PA9)
Wire Wire Line
	11800 9200 14200 9200
Text Label 8600 9200 0    60   ~ 0
PWM for mosfet phase_c high (STM32F100 PA10)
Wire Wire Line
	8600 9200 11000 9200
Text Label 11950 9100 0    60   ~ 0
PWM for mosfet phase_c low (STM32F100 PB15)
Wire Wire Line
	11800 9100 14200 9100
Text Label 9100 7850 0    60   ~ 0
Hall sensor phase_a (STM32F100 PA6)
Wire Wire Line
	9100 7850 11000 7850
Text Label 11950 7850 0    60   ~ 0
Hall sensor phase_b (STM32F100 PA7)
Wire Wire Line
	11800 7850 13750 7850
Text Label 9100 7750 0    60   ~ 0
Hall sensor phase_c (STM32F100 PB0)
Wire Wire Line
	9100 7750 11000 7750
Text Label 11950 8900 0    60   ~ 0
UART TX (STM32F100 PB10)
Wire Wire Line
	11800 8900 13200 8900
Text Label 9550 8900 0    60   ~ 0
UART RX (STM32F100 PB11)
Wire Wire Line
	9550 8900 11000 8900
NoConn ~ 11800 8250
NoConn ~ 11000 8250
NoConn ~ 11000 8350
NoConn ~ 11800 7950
NoConn ~ 11000 7950
NoConn ~ 11800 9300
NoConn ~ 11800 9400
NoConn ~ 11800 9500
NoConn ~ 11800 9600
NoConn ~ 11000 9400
NoConn ~ 11000 9500
NoConn ~ 11000 9600
NoConn ~ 11800 7750
$Comp
L GND #PWR65
U 1 1 510FC57C
P 13250 6300
F 0 "#PWR65" H 13250 6300 30  0001 C CNN
F 1 "GND" H 13250 6230 30  0001 C CNN
	1    13250 6300
	1    0    0    -1  
$EndComp
Wire Wire Line
	13250 6200 13250 6300
Wire Wire Line
	13250 4950 13250 5400
Wire Wire Line
	11100 5900 12850 5900
Wire Wire Line
	12750 5900 12750 5950
Text Label 11100 5900 0    60   ~ 0
DAC_signal (STM32F100 PA4)
Connection ~ 12750 5900
Wire Wire Line
	11100 5700 12850 5700
Text Label 11100 5700 0    60   ~ 0
Current_signal (STM32F100 PA2)
$Comp
L +3.3V #PWR64
U 1 1 51118B0B
P 13250 4950
F 0 "#PWR64" H 13250 4910 30  0001 C CNN
F 1 "+3.3V" H 13250 5060 30  0000 C CNN
	1    13250 4950
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR63
U 1 1 51118D20
P 13050 5400
F 0 "#PWR63" H 13050 5400 30  0001 C CNN
F 1 "GND" H 13050 5330 30  0001 C CNN
	1    13050 5400
	1    0    0    -1  
$EndComp
$Comp
L C_MINI C28
U 1 1 51118D26
P 13050 5200
F 0 "C28" V 13000 5240 30  0000 C CNN
F 1 "100nF" V 13100 5270 25  0000 C CNN
	1    13050 5200
	0    -1   -1   0   
$EndComp
Wire Wire Line
	13050 5400 13050 5300
$Comp
L LM358 U7
U 1 1 510FC56F
P 13350 5800
F 0 "U7" H 13300 6000 60  0000 L CNN
F 1 "LM358" H 13300 5550 60  0000 L CNN
	1    13350 5800
	1    0    0    -1  
$EndComp
Wire Wire Line
	13050 5100 13050 5050
Wire Wire Line
	13050 5050 13250 5050
Connection ~ 13250 5050
Text Label 13950 5800 0    60   ~ 0
TIM1_ETR (STM32F100 PA12)
Wire Wire Line
	13850 5800 15250 5800
Text Label 12800 9700 0    60   ~ 0
Brake_signal (STM32F100 PB12)
Wire Wire Line
	12100 9700 14300 9700
Text Notes 12100 9600 0    60   ~ 0
Wire to S1 button\non the board
Text Label 9550 9300 0    60   ~ 0
TIM1_ETR (STM32F100 PA12)
Wire Wire Line
	9550 9300 11000 9300
$EndSCHEMATC
